<!DOCTYPE html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ãœbung 8 Aufgabe 8.1</title>
</head>

<body>
  <div id="output"></div>
</body>

  <script>
    function fetchData(file) {
      return new Promise((resolve, reject) => {
        const xhr = new XMLHttpRequest();
        xhr.open('GET', file, true);
        xhr.onreadystatechange = function () {
          if (xhr.readyState === 4) {
            if (xhr.status === 200) {
              resolve(xhr.responseText);
            } else {
              reject(new Error(`Fetch fehlgeschlagen ${file}`));
            }
          }
        };
        xhr.send();
      });
    }

    function zsmfuegen(dA, dB) {
      const outputDiv = document.getElementById('output');

      // beide parallel fetchen
      const promiseA = fetchData(dA);
      const promiseB = fetchData(dB);

      Promise.all([promiseA, promiseB])
        .then(([inhaltA, inhaltB]) => {
          const zA = inhaltA.split('\n');
          const zB = inhaltB.split('\n');

          zA.forEach((a, index) => {
            const b = zB[index] || ''; 
            const concatenatedLine = a + ' ' + b;
            const elem = document.createElement('p');
            elem.textContent = concatenatedLine;
            outputDiv.appendChild(elem);
          });
        })
        .catch(error => {
          console.error(error.message);
        });
    }

    zsmfuegen('http://localhost:8000/A.txt', 'http://localhost:8000/B.txt');
  </script>

</html>
